// build time:Fri Mar 24 2023 14:45:07 GMT+0800 (China Standard Time)
$(document).ready(function(){var e=CONFIG.sidebar&&CONFIG.sidebar.tocMaxDepth||4;var t="h1,h2,h3,h4,h5,h6,".slice(0,e*3).slice(0,-1);function a(){if($(".post-body, .custompage").find(t)[0]){return}$(".sidebar-nav").addClass("hide");$(".sidebar-toc").addClass("hide");$(".sidebar-ov").removeClass("hide")}var r=null;var i=null;var o=false;function s(){var e=$(".post-body, .custompage");var a=$(".sidebar-toc li");var s=e.find(t);var n=s.first();s.each(function(){var e=this.getBoundingClientRect().top;var t=5;if(e<=t){r=window.encodeURIComponent(this.getAttribute("id"))}});if(e[0]&&n[0]&&n[0].getBoundingClientRect().top>0&&n.offset().top-$(window).scrollTop()>0){if(!o){a.removeClass("active current");o=true}return}if(r!==i){var d=$('.sidebar-toc a[href="#'+r+'"]');if(!d.length){var c=window.decodeURIComponent(r);d=$('.sidebar-toc a[href="#'+c+'"]')}a.removeClass("active current");d.parents("li").addClass("active");d.parent().addClass("current");i=r;o=false}}var n=false;function d(){var e=$(".sidebar-toc").height();var t=$(".sidebar-toc > div").height();if(t<=e){return}var a=$(".sidebar-toc");var r=$(".sidebar-toc .current a");if(r[0]&&a[0]){var i=r.offset().top-a.offset().top;n=i>e||i<0}if(n){r.velocity("stop").velocity("scroll",{container:a,offset:-e/2,duration:500,easing:"easeOutQuart"})}}var c=0;if(CONFIG.sidebar&&CONFIG.sidebar.offsetTop){c=parseInt(CONFIG.sidebar.offsetTop)}function l(){var e=$("#sidebar");var t=document.getElementById("content-wrap").getBoundingClientRect().top;if(t<c){e.addClass("sidebar--sticky")}else{e.removeClass("sidebar--sticky")}}function f(){if($("#is-post").length===0){return}var e=$(".content");var t=e.offset().top;var a=0;var r=0;var i=0;var o=false;var s=0;if(CONFIG.postWidget&&CONFIG.postWidget.endText){o=true}if(o){a=$(".post-ending").offset().top;r=$(".post-ending").outerHeight();i=a-t+r}else{a=$(".post-footer").offset().top;i=a-t}var n=$(window).height();var d=0;if(e.length!==0){d=parseInt(e[0].getBoundingClientRect().top*-1)+n}var c=Number($(".sidebar-reading-info__num").text());i=parseInt(Math.abs(i));s=parseInt(d/i*100);s=s>100?100:s<0?0:s;if(s===0&&c===0||s===100&&c===100){return}$(".sidebar-reading-info__num").text(s);$(".sidebar-reading-line").css("transform","translateX("+(s-100)+"%)")}s();l();d();f();$(window).on("scroll",function(){l()});$(window).on("scroll",Stun.utils.throttle(function(){s();d();f()},150));Stun.utils.pjaxReloadSidebar=function(){var e=$(".sidebar-nav-toc");var t=$(".sidebar-nav-ov");var r=$(".sidebar-toc");var i=$(".sidebar-ov");e.on("click",function(a){a.stopPropagation();if($(this).hasClass("current")){return}e.addClass("current");t.removeClass("current");r.css("display","block");r.velocity("stop").velocity("fadeIn");i.css("display","none");i.velocity("stop").velocity("fadeOut")});t.on("click",function(a){a.stopPropagation();if($(this).hasClass("current")){return}t.addClass("current");e.removeClass("current");r.css("display","none");r.velocity("stop").velocity("fadeOut");i.css("display","block");i.velocity("stop").velocity("fadeIn")});a()};Stun.utils.pjaxReloadSidebar()});
//rebuild by hrmmi 